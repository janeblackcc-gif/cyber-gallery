{
  "version": 3,
  "sources": ["../../../worker.js"],
  "sourceRoot": "C:\\Users\\12695\\Desktop\\\u524D\u7AEF\u6D4B\u8BD5\\\u524D\u7AEF\u6D4B\u8BD52\\cyber-gallery\\cloudflare-worker\\.wrangler\\tmp\\deploy-44l6S5",
  "sourcesContent": ["const JSON_HEADERS = {\r\n  \"Content-Type\": \"application/json; charset=utf-8\",\r\n};\r\n\r\nconst GOOGLE_SHEETS_SCOPE = \"https://www.googleapis.com/auth/spreadsheets\";\r\nconst GOOGLE_TOKEN_URL = \"https://oauth2.googleapis.com/token\";\r\n\r\nlet cachedToken = null;\r\n\r\nexport default {\r\n  async fetch(request, env) {\r\n    const url = new URL(request.url);\r\n    const corsHeaders = buildCorsHeaders(request, env);\r\n\r\n    if (request.method === \"OPTIONS\") {\r\n      return new Response(null, { status: 204, headers: corsHeaders });\r\n    }\r\n\r\n    if (request.method !== \"POST\") {\r\n      return jsonError(\"Method not allowed\", 405, corsHeaders);\r\n    }\r\n\r\n    if (url.pathname === \"/upload/init\") {\r\n      return handleUploadInit(request, env, corsHeaders);\r\n    }\r\n\r\n    if (url.pathname === \"/upload/complete\") {\r\n      return handleUploadComplete(request, env, corsHeaders);\r\n    }\r\n\r\n    return jsonError(\"Not found\", 404, corsHeaders);\r\n  },\r\n};\r\n\r\nasync function handleUploadInit(request, env, corsHeaders) {\r\n  const body = await readJson(request);\r\n  if (!body) return jsonError(\"Invalid JSON\", 400, corsHeaders);\r\n\r\n  const { filename, contentType, size } = body;\r\n  if (!filename || !size) {\r\n    return jsonError(\"Missing filename or size\", 400, corsHeaders);\r\n  }\r\n\r\n  const maxBytes = parseInt(env.MAX_UPLOAD_BYTES || \"1073741824\", 10);\r\n  if (Number.isFinite(maxBytes) && size > maxBytes) {\r\n    return jsonError(\"File too large\", 413, corsHeaders);\r\n  }\r\n\r\n  const safeName = sanitizeFilename(filename);\r\n  const objectKey = buildObjectKey(safeName);\r\n  const expires = parseInt(env.PRESIGN_EXPIRES || \"900\", 10);\r\n  const uploadUrl = await createPresignedUrl(env, objectKey, expires);\r\n  const fileUrl = buildPublicUrl(env.PUBLIC_R2_BASE_URL, objectKey);\r\n\r\n  return jsonResponse(\r\n    {\r\n      uploadUrl,\r\n      objectKey,\r\n      fileUrl,\r\n      contentType: contentType || \"application/octet-stream\",\r\n    },\r\n    200,\r\n    corsHeaders\r\n  );\r\n}\r\n\r\nasync function handleUploadComplete(request, env, corsHeaders) {\r\n  const body = await readJson(request);\r\n  if (!body) return jsonError(\"Invalid JSON\", 400, corsHeaders);\r\n\r\n  const { objectKey, title, date, desc } = body;\r\n  if (!objectKey) return jsonError(\"Missing objectKey\", 400, corsHeaders);\r\n\r\n  const object = await env.R2_BUCKET.head(objectKey);\r\n  if (!object) return jsonError(\"Object not found\", 404, corsHeaders);\r\n\r\n  const spreadsheetId = env.SPREADSHEET_ID;\r\n  const sheetName = env.SHEET_NAME || \"Sheet1\";\r\n  if (!spreadsheetId) {\r\n    return jsonError(\"Missing SPREADSHEET_ID\", 500, corsHeaders);\r\n  }\r\n\r\n  const submissionId = crypto.randomUUID();\r\n  const respondentId = \"Upload-\" + submissionId.slice(0, 7);\r\n  const submittedAt = new Date().toISOString().replace('T', ' ').slice(0, 19);\r\n  const fileUrl = buildPublicUrl(env.PUBLIC_R2_BASE_URL, objectKey);\r\n  const values = [[submissionId, respondentId, submittedAt, title || \"\", date || \"\", desc || \"\", fileUrl]];\r\n\r\n  await appendToSheet(env, spreadsheetId, sheetName, values);\r\n\r\n  return jsonResponse(\r\n    {\r\n      ok: true,\r\n      submissionId,\r\n      fileUrl,\r\n    },\r\n    200,\r\n    corsHeaders\r\n  );\r\n}\r\n\r\nasync function appendToSheet(env, spreadsheetId, sheetName, values) {\r\n  const token = await getGoogleAccessToken(env);\r\n  const range = `${sheetName}!A:E`;\r\n  const url =\r\n    `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}` +\r\n    `/values/${encodeURIComponent(range)}:append` +\r\n    `?valueInputOption=USER_ENTERED&insertDataOption=INSERT_ROWS`;\r\n\r\n  const response = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      \"Content-Type\": \"application/json; charset=utf-8\",\r\n    },\r\n    body: JSON.stringify({ values }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const text = await response.text();\r\n    throw new Error(`Sheets append failed: ${response.status} ${text}`);\r\n  }\r\n}\r\n\r\nasync function getGoogleAccessToken(env) {\r\n  const now = Math.floor(Date.now() / 1000);\r\n  if (cachedToken && cachedToken.exp - 60 > now) {\r\n    return cachedToken.token;\r\n  }\r\n\r\n  const jwt = await createJwt(env);\r\n  const response = await fetch(GOOGLE_TOKEN_URL, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    },\r\n    body: new URLSearchParams({\r\n      grant_type: \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\r\n      assertion: jwt,\r\n    }),\r\n  });\r\n\r\n  const data = await response.json();\r\n  if (!response.ok) {\r\n    throw new Error(`Token error: ${response.status} ${JSON.stringify(data)}`);\r\n  }\r\n\r\n  cachedToken = {\r\n    token: data.access_token,\r\n    exp: now + (data.expires_in || 3600),\r\n  };\r\n\r\n  return cachedToken.token;\r\n}\r\n\r\nasync function createJwt(env) {\r\n  const clientEmail = env.GOOGLE_SERVICE_ACCOUNT_EMAIL;\r\n  const privateKeyRaw = env.GOOGLE_PRIVATE_KEY || \"\";\r\n  const privateKey = privateKeyRaw.replace(/\\\\n/g, \"\\n\");\r\n\r\n  if (!clientEmail || !privateKey) {\r\n    throw new Error(\"Missing Google service account credentials\");\r\n  }\r\n\r\n  const now = Math.floor(Date.now() / 1000);\r\n  const header = { alg: \"RS256\", typ: \"JWT\" };\r\n  const payload = {\r\n    iss: clientEmail,\r\n    scope: GOOGLE_SHEETS_SCOPE,\r\n    aud: GOOGLE_TOKEN_URL,\r\n    iat: now,\r\n    exp: now + 3600,\r\n  };\r\n\r\n  const encodedHeader = base64UrlEncode(JSON.stringify(header));\r\n  const encodedPayload = base64UrlEncode(JSON.stringify(payload));\r\n  const unsignedToken = `${encodedHeader}.${encodedPayload}`;\r\n  const signature = await signJwt(privateKey, unsignedToken);\r\n\r\n  return `${unsignedToken}.${signature}`;\r\n}\r\n\r\nasync function signJwt(privateKeyPem, data) {\r\n  const keyData = pemToArrayBuffer(privateKeyPem);\r\n  const key = await crypto.subtle.importKey(\r\n    \"pkcs8\",\r\n    keyData,\r\n    { name: \"RSASSA-PKCS1-v1_5\", hash: \"SHA-256\" },\r\n    false,\r\n    [\"sign\"]\r\n  );\r\n  const signature = await crypto.subtle.sign(\r\n    \"RSASSA-PKCS1-v1_5\",\r\n    key,\r\n    new TextEncoder().encode(data)\r\n  );\r\n  return base64UrlEncode(signature);\r\n}\r\n\r\nasync function createPresignedUrl(env, objectKey, expiresSeconds) {\r\n  const accessKeyId = env.R2_ACCESS_KEY_ID;\r\n  const secretAccessKey = env.R2_SECRET_ACCESS_KEY;\r\n  const accountId = env.R2_ACCOUNT_ID;\r\n  const bucket = env.R2_BUCKET_NAME || \"cyber-gallery-uploads\";\r\n\r\n  if (!accessKeyId || !secretAccessKey || !accountId) {\r\n    throw new Error(\"Missing R2 credentials\");\r\n  }\r\n\r\n  const host = `${accountId}.r2.cloudflarestorage.com`;\r\n  const method = \"PUT\";\r\n  const now = new Date();\r\n  const amzDate = toAmzDate(now);\r\n  const dateStamp = amzDate.slice(0, 8);\r\n  const credentialScope = `${dateStamp}/auto/s3/aws4_request`;\r\n  const signedHeaders = \"host\";\r\n  const canonicalUri = `/${bucket}/${encodeR2Key(objectKey)}`;\r\n  const query = {\r\n    \"X-Amz-Algorithm\": \"AWS4-HMAC-SHA256\",\r\n    \"X-Amz-Credential\": `${accessKeyId}/${credentialScope}`,\r\n    \"X-Amz-Date\": amzDate,\r\n    \"X-Amz-Expires\": String(expiresSeconds),\r\n    \"X-Amz-SignedHeaders\": signedHeaders,\r\n  };\r\n\r\n  const canonicalQuery = buildCanonicalQuery(query);\r\n  const canonicalHeaders = `host:${host}\\n`;\r\n  const payloadHash = \"UNSIGNED-PAYLOAD\";\r\n  const canonicalRequest = [\r\n    method,\r\n    canonicalUri,\r\n    canonicalQuery,\r\n    canonicalHeaders,\r\n    signedHeaders,\r\n    payloadHash,\r\n  ].join(\"\\n\");\r\n\r\n  const stringToSign = [\r\n    \"AWS4-HMAC-SHA256\",\r\n    amzDate,\r\n    credentialScope,\r\n    await sha256Hex(canonicalRequest),\r\n  ].join(\"\\n\");\r\n\r\n  const signingKey = await getSignatureKey(\r\n    secretAccessKey,\r\n    dateStamp,\r\n    \"auto\",\r\n    \"s3\"\r\n  );\r\n  const signature = await hmacHex(signingKey, stringToSign);\r\n\r\n  return `https://${host}${canonicalUri}?${canonicalQuery}&X-Amz-Signature=${signature}`;\r\n}\r\n\r\nfunction buildObjectKey(filename) {\r\n  const now = new Date();\r\n  const yyyy = now.getUTCFullYear();\r\n  const mm = String(now.getUTCMonth() + 1).padStart(2, \"0\");\r\n  const dd = String(now.getUTCDate()).padStart(2, \"0\");\r\n  return `${yyyy}/${mm}/${dd}/${crypto.randomUUID()}-${filename}`;\r\n}\r\n\r\nfunction sanitizeFilename(name) {\r\n  const base = name.split(/[\\\\\\/]/).pop() || \"upload.bin\";\r\n  return base.replace(/[^A-Za-z0-9._-]+/g, \"_\").slice(0, 120);\r\n}\r\n\r\nfunction buildPublicUrl(baseUrl, objectKey) {\r\n  const trimmed = (baseUrl || \"\").replace(/\\/+$/, \"\");\r\n  return `${trimmed}/${encodeR2Key(objectKey)}`;\r\n}\r\n\r\nfunction encodeR2Key(key) {\r\n  return key.split(\"/\").map(encodeURIComponent).join(\"/\");\r\n}\r\n\r\nfunction buildCanonicalQuery(query) {\r\n  return Object.keys(query)\r\n    .sort()\r\n    .map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(query[key])}`)\r\n    .join(\"&\");\r\n}\r\n\r\nfunction toAmzDate(date) {\r\n  return date.toISOString().replace(/[:-]|\\.\\d{3}/g, \"\");\r\n}\r\n\r\nasync function sha256Hex(data) {\r\n  const hash = await crypto.subtle.digest(\r\n    \"SHA-256\",\r\n    new TextEncoder().encode(data)\r\n  );\r\n  return toHex(hash);\r\n}\r\n\r\nasync function hmacHex(key, data) {\r\n  const signature = await hmacRaw(key, data);\r\n  return toHex(signature);\r\n}\r\n\r\nasync function hmacRaw(key, data) {\r\n  const keyBytes =\r\n    typeof key === \"string\" ? new TextEncoder().encode(key) : new Uint8Array(key);\r\n  const cryptoKey = await crypto.subtle.importKey(\r\n    \"raw\",\r\n    keyBytes,\r\n    { name: \"HMAC\", hash: \"SHA-256\" },\r\n    false,\r\n    [\"sign\"]\r\n  );\r\n  return crypto.subtle.sign(\"HMAC\", cryptoKey, new TextEncoder().encode(data));\r\n}\r\n\r\nasync function getSignatureKey(secretKey, dateStamp, regionName, serviceName) {\r\n  const kDate = await hmacRaw(`AWS4${secretKey}`, dateStamp);\r\n  const kRegion = await hmacRaw(kDate, regionName);\r\n  const kService = await hmacRaw(kRegion, serviceName);\r\n  return hmacRaw(kService, \"aws4_request\");\r\n}\r\n\r\nfunction toHex(buffer) {\r\n  return [...new Uint8Array(buffer)]\r\n    .map((b) => b.toString(16).padStart(2, \"0\"))\r\n    .join(\"\");\r\n}\r\n\r\nfunction base64UrlEncode(input) {\r\n  const bytes =\r\n    typeof input === \"string\"\r\n      ? new TextEncoder().encode(input)\r\n      : new Uint8Array(input);\r\n  let binary = \"\";\r\n  for (const b of bytes) binary += String.fromCharCode(b);\r\n  return btoa(binary).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\r\n}\r\n\r\nfunction pemToArrayBuffer(pem) {\r\n  const cleaned = pem\r\n    .replace(/-----BEGIN PRIVATE KEY-----/g, \"\")\r\n    .replace(/-----END PRIVATE KEY-----/g, \"\")\r\n    .replace(/\\s+/g, \"\");\r\n  const binary = atob(cleaned);\r\n  const bytes = new Uint8Array(binary.length);\r\n  for (let i = 0; i < binary.length; i += 1) {\r\n    bytes[i] = binary.charCodeAt(i);\r\n  }\r\n  return bytes.buffer;\r\n}\r\n\r\nfunction buildCorsHeaders(request, env) {\r\n  const origin = request.headers.get(\"Origin\") || \"\";\r\n  const allowed = (env.CORS_ORIGIN || \"*\").trim();\r\n\r\n  if (allowed === \"*\") {\r\n    return {\r\n      \"Access-Control-Allow-Origin\": \"*\",\r\n      \"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\r\n      \"Access-Control-Allow-Headers\": \"Content-Type\",\r\n      \"Access-Control-Max-Age\": \"86400\",\r\n      Vary: \"Origin\",\r\n    };\r\n  }\r\n\r\n  const allowedList = allowed\r\n    .split(\",\")\r\n    .map((item) => item.trim())\r\n    .filter(Boolean);\r\n  const allowOrigin = allowedList.includes(origin) ? origin : allowedList[0] || \"\";\r\n\r\n  return {\r\n    \"Access-Control-Allow-Origin\": allowOrigin,\r\n    \"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\r\n    \"Access-Control-Allow-Headers\": \"Content-Type\",\r\n    \"Access-Control-Max-Age\": \"86400\",\r\n    Vary: \"Origin\",\r\n  };\r\n}\r\n\r\nfunction jsonResponse(data, status, corsHeaders) {\r\n  return new Response(JSON.stringify(data), {\r\n    status,\r\n    headers: { ...JSON_HEADERS, ...corsHeaders },\r\n  });\r\n}\r\n\r\nfunction jsonError(message, status, corsHeaders) {\r\n  return jsonResponse({ error: message }, status, corsHeaders);\r\n}\r\n\r\nasync function readJson(request) {\r\n  try {\r\n    return await request.json();\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
